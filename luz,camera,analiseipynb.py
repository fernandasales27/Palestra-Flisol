# -*- coding: utf-8 -*-
"""luz,camera,analiseipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1P1QCZOnZZ_l7Yih10fcSaVbgxbFDLmB4
"""

import pandas as pd
import plotly.express as px
import matplotlib.pyplot as plt

df = pd.read_csv('/content/base_de_filmes.csv' ,encoding='ISO-8859-1', delimiter=';')
df

df.head(5)

df.info()

df.isnull().sum()

df.shape

df.describe()

df.columns

df['Lucro (USD)'] = df['Receita (USD)'] - df['OrÃ§amento (USD)']
df

print(df[['TÃ­tulo', 'Lucro (USD)']].head())

generos = df["GÃªnero"].value_counts()
generos

# Contagem de filmes por gÃªnero
generos = df["GÃªnero"].value_counts().reset_index()
generos.columns = ["GÃªnero", "Quantidade"]

# Criando grÃ¡fico de barras estilizado
fig = px.bar(
    generos,
    x="GÃªnero",
    y="Quantidade",
    title="ðŸŽ¬ DistribuiÃ§Ã£o de Filmes por GÃªnero",
    color="GÃªnero",
    text="Quantidade",
    color_discrete_sequence=px.colors.qualitative.Pastel
)

# Ajustes de layout
fig.update_layout(
    title_font_size=24,
    title_x=0.5,
    plot_bgcolor="#f9f9f9",
    paper_bgcolor="#f9f9f9",
    font=dict(size=14),
    showlegend=False
)

# Ajuste do texto nas barras
fig.update_traces(textposition="outside")

fig.show()

# Contagem de filmes lanÃ§ados por ano
filmes_por_ano = df["Ano de LanÃ§amento"].value_counts().reset_index()
filmes_por_ano.columns = ["Ano", "Quantidade"]
filmes_por_ano = filmes_por_ano.sort_values("Ano")

# GrÃ¡fico de linha estilizado
fig = px.line(
    filmes_por_ano,
    x="Ano",
    y="Quantidade",
    title="ðŸŽ¥ EvoluÃ§Ã£o do NÃºmero de Filmes por Ano",
    markers=True,
    line_shape="spline"  # curva suave
)

# Estilo visual
fig.update_traces(line=dict(color="#636EFA", width=3), marker=dict(size=6, color="#EF553B"))
fig.update_layout(
    title_font_size=24,
    title_x=0.5,
    plot_bgcolor="#f9f9f9",
    paper_bgcolor="#f9f9f9",
    font=dict(size=14),
    xaxis_title="Ano",
    yaxis_title="Quantidade de Filmes"
)

fig.show()

df_top10 = df[:10]

# GrÃ¡fico de barras agrupadas estilizado
fig = px.bar(
    df_top10,
    x="TÃ­tulo",
    y=["Receita (USD)", "OrÃ§amento (USD)"],
    title="ðŸ’° ComparaÃ§Ã£o de OrÃ§amento e Receita dos Filmes",
    labels={"value": "Valor em USD", "variable": "Categoria"},
    barmode="group",
    color_discrete_sequence=["#00CC96", "#636EFA"]
)

# EstilizaÃ§Ã£o extra
fig.update_layout(
    title_font_size=24,
    title_x=0.5,
    plot_bgcolor="#f9f9f9",
    paper_bgcolor="#f9f9f9",
    font=dict(size=14),
    xaxis_tickangle=-45,
    xaxis_title="Filmes",
    yaxis_title="Valor em USD",
    legend_title=""
)

# Borda arredondada nas barras (simulada com maior espaÃ§amento)
fig.update_traces(marker_line_width=1.5, marker_line_color="white")

fig.show()